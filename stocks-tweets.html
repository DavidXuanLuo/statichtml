<!doctype html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>X</title>
<style>
:root{--bg:#fff;--text:#0f1419;--sub:#536471;--line:#eff3f4;--blue:#1d9bf0;--green:#00ba7c;--pink:#f91880}
*{box-sizing:border-box}
body{margin:0;background:#fff;color:var(--text);font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"PingFang SC",sans-serif}
.app{max-width:430px;margin:0 auto;min-height:100vh;background:#fff;border-left:1px solid var(--line);border-right:1px solid var(--line)}
.top{position:sticky;top:0;z-index:30;background:rgba(255,255,255,.94);backdrop-filter:blur(14px);border-bottom:1px solid var(--line)}
.logo{height:53px;display:flex;align-items:center;justify-content:center;font-size:29px;font-weight:300}
.tabs{height:48px;display:flex}.tab{flex:1;text-align:center;font-size:15px;color:var(--sub);padding-top:14px;position:relative}.tab.on{color:var(--text);font-weight:700}.tab.on::after{content:"";position:absolute;left:34%;right:34%;bottom:0;height:4px;border-radius:99px;background:var(--blue)}
.page{display:none}.page.on{display:block}
.tweet{display:flex;gap:12px;padding:12px 16px;border-bottom:1px solid var(--line)}
.feed .tweet{cursor:pointer}
.avatar{width:40px;height:40px;border-radius:50%;object-fit:cover;background:#eef3f5;flex:0 0 40px}
.main{min-width:0;flex:1}.head{display:flex;align-items:center;gap:4px;min-width:0;font-size:16px;line-height:1.25}
.name{font-weight:700;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:46%}
.handle,.dot,.time{color:var(--sub)}
.text{margin-top:3px;white-space:pre-wrap;word-break:break-word;font-size:17px;line-height:1.42}
.orig{margin-top:8px}.orig summary{color:var(--sub);cursor:pointer;font-size:13px;list-style:none}.orig summary::-webkit-details-marker{display:none}
.orig .raw,.orig .trans{margin-top:6px;color:var(--sub);font-size:14px;line-height:1.42;white-space:pre-wrap}
.orig .label{display:block;font-size:12px;color:#8899a6;margin-bottom:2px}
.tweet:not(.main-tweet):not(.comment) .text,.comment .text{font-size:16px;line-height:1.4}
.media{margin-top:12px;display:grid;gap:2px;border-radius:16px;overflow:hidden;border:1px solid #cfd9de;background:#f7f9f9}
.media.one{grid-template-columns:1fr}.media.two{grid-template-columns:1fr 1fr}.media.three{grid-template-columns:1fr 1fr}.media.three .m:first-child{grid-row:span 2}.media.four{grid-template-columns:1fr 1fr}
.m{aspect-ratio:16/10;overflow:hidden;background:#dde5ea;position:relative}.m img{width:100%;height:100%;object-fit:cover;display:block}
.m.video::after{content:"‚ñ∂";position:absolute;right:8px;bottom:8px;background:rgba(0,0,0,.62);color:#fff;border-radius:999px;width:24px;height:24px;display:flex;align-items:center;justify-content:center;font-size:12px}
.actions{display:grid;grid-template-columns:repeat(5,minmax(0,1fr));margin-top:12px;font-size:13px;color:var(--sub)}
.a{display:inline-flex;align-items:center;gap:5px;width:max-content;border:0;background:none;padding:0;color:inherit;cursor:pointer}.a .i{width:19px;height:19px;display:inline-flex;align-items:center;justify-content:center;border-radius:999px}.a svg{width:19px;height:19px;fill:none;stroke:currentColor;stroke-width:1.9;stroke-linecap:round;stroke-linejoin:round}.a .n{font-size:12px}
.a.reply:hover{color:var(--blue)}.a.rt:hover{color:var(--green)}.a.like:hover{color:var(--pink)}
.detail-top{position:sticky;top:0;z-index:35;height:53px;display:flex;align-items:center;gap:14px;padding:0 12px;border-bottom:1px solid var(--line);background:rgba(255,255,255,.95);backdrop-filter:blur(12px)}
.back{border:0;background:none;font-size:26px;line-height:1;cursor:pointer;width:36px;height:36px;border-radius:50%;padding:0}.title{font-size:21px;font-weight:700}
.subtle{height:1px;background:var(--line)}.main-tweet{padding-top:10px;padding-bottom:14px;border-bottom:0}.detail-actions{padding:0 16px 10px;border-bottom:1px solid var(--line)}
.comment{cursor:default;padding-top:10px;padding-bottom:10px}.comment .avatar{width:40px;height:40px;flex-basis:40px}
</style>
</head>
<body>
<div class="app">
  <div class="top" id="feedTop"><div class="logo">ùïè</div><div class="tabs"><div class="tab on">‰∏∫‰Ω†Êé®Ëçê</div><div class="tab">Ê≠£Âú®ÂÖ≥Ê≥®</div></div></div>
  <section id="feed" class="page on feed"></section>
  <section id="detail" class="page"></section>
</div>
<script>
let posts=[];
const REPLY_FETCH_LIMIT=50;
const feed=document.getElementById('feed'),detail=document.getElementById('detail'),feedTop=document.getElementById('feedTop');
const esc=s=>String(s||'').replace(/[&<>"']/g,m=>({"&":"&amp;","<":"&lt;",">":"&gt;","\"":"&quot;","'":"&#39;"}[m]));
const d=s=>new Date(s).toLocaleDateString('zh-CN',{month:'numeric',day:'numeric'});
const parseCount=v=>{const t=String(v||'').trim().toLowerCase().replace(/,/g,'');if(!t)return 0;const m=t.match(/^([\d.]+)\s*([k‰∏áw]?)$/);if(!m)return parseInt(t,10)||0;const n=parseFloat(m[1])||0;const u=m[2];if(u==='k')return Math.round(n*1000);if(u==='‰∏á'||u==='w')return Math.round(n*10000);return Math.round(n)};
const ic={reply:'<svg viewBox="0 0 24 24"><path d="M21 15a4 4 0 0 1-4 4H8l-5 3V7a4 4 0 0 1 4-4h10a4 4 0 0 1 4 4z"/></svg>',rt:'<svg viewBox="0 0 24 24"><path d="M17 1l4 4-4 4"/><path d="M3 11V9a4 4 0 0 1 4-4h14"/><path d="M7 23l-4-4 4-4"/><path d="M21 13v2a4 4 0 0 1-4 4H3"/></svg>',like:'<svg viewBox="0 0 24 24"><path d="M20.8 4.6a5.5 5.5 0 0 0-7.8 0L12 5.6l-1-1a5.5 5.5 0 0 0-7.8 7.8l1 1L12 21l7.8-7.6 1-1a5.5 5.5 0 0 0 0-7.8z"/></svg>',view:'<svg viewBox="0 0 24 24"><path d="M5 20V10"/><path d="M10 20V4"/><path d="M15 20v-7"/><path d="M20 20V8"/></svg>',share:'<svg viewBox="0 0 24 24"><path d="M12 16V3"/><path d="M7 8l5-5 5 5"/><path d="M5 13v5a3 3 0 0 0 3 3h8a3 3 0 0 0 3-3v-5"/></svg>'};
function textBlock(p,mode='feed'){const zh=String((mode==='detail'?p.fullZh:p.zh)||p.zh||'').trim(),raw=String((mode==='detail'?p.fullText:p.text)||p.text||'').trim();if(zh&&raw&&zh!==raw){if(mode==='detail'){return `<div class="text">${esc(zh)}</div><details class="orig"><summary>Êü•ÁúãÂéüÊñáÔºàÂ±ïÂºÄÂÆåÊï¥Ê≠£Êñá+ËØëÊñáÔºâ</summary><div class="trans"><span class="label">‰∏≠ÊñáÂÖ®ËØë</span>${esc(zh)}</div><div class="raw"><span class="label">ÂéüÊñáÂÖ®Êñá</span>${esc(raw)}</div></details>`;}return `<div class="text">${esc(zh)}</div><details class="orig"><summary>Êü•ÁúãÂéüÊñá</summary><div class="raw">${esc(raw)}</div></details>`;}return `<div class="text">${esc(zh||raw)}</div>`;}
function mediaGrid(arr){arr=(arr||[]).slice(0,4);if(!arr.length) return '';const cls=['one','two','three','four'][arr.length-1];return `<div class="media ${cls}">${arr.map(m=>`<div class="m ${m.type==='video'?'video':''}"><img src="${esc(m.url)}" loading="lazy"/></div>`).join('')}</div>`;}
function actions(c,i){return `<div class="actions"><button class="a reply js-open" data-i="${i}"><span class="i">${ic.reply}</span><span class="n">${esc(c.reply||'0')}</span></button><button class="a rt"><span class="i">${ic.rt}</span><span class="n">${esc(c.repost||'')}</span></button><button class="a like"><span class="i">${ic.like}</span><span class="n">${esc(c.like||'')}</span></button><button class="a"><span class="i">${ic.view}</span><span class="n">${esc(c.view||'')}</span></button><button class="a"><span class="i">${ic.share}</span></button></div>`}
function tweetBody(p,mode='feed',withActions=false,i=-1){return `<img class="avatar" src="${esc(p.avatar)}" alt="${esc(p.name)}" loading="lazy"/><div class="main"><div class="head"><span class="name">${esc(p.name)}</span><span class="handle">${esc(p.handle)}</span><span class="dot">¬∑</span><span class="time">${d(p.time)}</span></div>${textBlock(p,mode)}${mediaGrid(p.media)}${withActions?actions(p.counts||{},i):''}</div>`;}
function commentTweet(c){return `<article class="tweet comment">${tweetBody(c,'detail',true,-1)}</article>`;}
function normalize(p){const comments=(p.comments||[]).slice(0,REPLY_FETCH_LIMIT);const shownComments=comments.length;const counts={...(p.counts||{}),reply:String(shownComments)};return {...p,comments,counts};}
function feedView(){detail.classList.remove('on');feed.classList.add('on');feedTop.style.display='block';}
function detailView(i,push){const p=posts[i];if(!p)return;detail.innerHTML=`<div class="detail-top"><button class="back" id="back" aria-label="ËøîÂõû">‚Üê</button><div class="title">Â∏ñÂ≠ê</div></div><article class="tweet main-tweet">${tweetBody(p,'detail')}</article><div class="detail-actions">${actions(p.counts||{},i)}</div><div class="subtle"></div>${p.comments.map(commentTweet).join('')}`;feed.classList.remove('on');detail.classList.add('on');feedTop.style.display='none';if(push) history.pushState({i},'',`#post-${i}`);document.getElementById('back').onclick=()=>history.back();window.scrollTo(0,0);}
feed.addEventListener('click',e=>{const t=e.target.closest('.tweet');if(t) detailView(+t.dataset.i,true)});
detail.addEventListener('click',e=>{const b=e.target.closest('.js-open');if(!b)return;e.preventDefault();const i=+b.dataset.i;if(i>=0)detailView(i,true)});
window.addEventListener('popstate',ev=>{if(ev.state&&typeof ev.state.i==='number')detailView(ev.state.i,false);else feedView()});
fetch('./stocks-tweets-data.json').then(r=>r.json()).then(j=>{posts=(j.posts||[]).slice(0,50).map(normalize);feed.innerHTML=posts.map((p,i)=>`<article class="tweet" data-i="${i}">${tweetBody(p,'feed',true,i)}</article>`).join('');if(location.hash.startsWith('#post-')){const i=+location.hash.slice(6);if(!Number.isNaN(i))detailView(i,false);}})
</script>
</body>
</html>