<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>富途 vs 老虎（港股成交走势）</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'PingFang SC','Helvetica Neue',Arial,sans-serif;margin:0;background:#f6f8fb;color:#111}
    .wrap{max-width:760px;margin:0 auto;padding:16px}
    .card{background:#fff;border-radius:12px;padding:14px;margin-bottom:12px;box-shadow:0 2px 10px rgba(0,0,0,.05)}
    h1{font-size:20px;margin:0 0 8px}
    .muted{color:#666;font-size:13px;line-height:1.5}
    .badge{display:inline-block;background:#fff3cd;color:#7a5c00;border:1px solid #ffe69a;border-radius:999px;padding:3px 10px;font-size:12px}
    ul{padding-left:18px;margin:8px 0}
    li{font-size:14px;line-height:1.5}
    .small{font-size:12px;color:#777}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>富途 vs 老虎：港股成交走势</h1>
      <div class="badge">当前状态：官方可做映射，品牌级成交时序暂无官方直连</div>
      <p class="muted">截至 2026-02-12：已确认富途/老虎对应的SEHK参与者编号与Broker No（官方HKEX CSV）。
      但HKEX公开统计暂未提供按单一参与者可直接抓取的历史成交额序列（至少在公开页面/CSV层面）。</p>
    </div>

    <div class="card">
      <strong>已落地数据</strong>
      <ul>
        <li>富途：Participant ID <b>01955</b>，含多个Broker No（见JSON）</li>
        <li>老虎：Participant ID <b>02142</b>，Broker No <b>2200/2204</b></li>
      </ul>
      <div class="small">来源：HKEX Current SEHK EP CSV</div>
    </div>

    <div class="card">
      <strong>市场月度背景（HKEX官方）</strong>
      <canvas id="ctx" height="210"></canvas>
      <div class="small">注：该图为市场总成交额，不是富途/老虎品牌级成交。</div>
    </div>

    <div class="card muted">
      文件：<code>hk-broker-mapping.json</code>、<code>hk-broker-trend.json</code>、<code>hk-broker-trend.html</code>
    </div>
  </div>

  <script>
    fetch('./hk-broker-trend.json').then(r=>r.json()).then(d=>{
      const labels = d.proxy_market_context_monthly.map(x=>x.month);
      const vals = d.proxy_market_context_monthly.map(x=>x.total_turnover_bil_hkd);
      new Chart(document.getElementById('ctx'), {
        type:'line',
        data:{labels,datasets:[{label:'HKEX市场总成交额（十亿港元）',data:vals,borderColor:'#2563eb',backgroundColor:'rgba(37,99,235,.12)',fill:true,tension:.25}]},
        options:{plugins:{legend:{display:true}},scales:{y:{beginAtZero:false}}}
      });
    });
  </script>
</body>
</html>